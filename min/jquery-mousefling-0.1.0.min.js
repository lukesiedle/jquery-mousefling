/*
 *	@version
 *	0.1.0
 *
 *	@author
 *	Luke Siedle
 *	http://lukesiedle.me
 *	https://github.com/luke-siedle/jquery-mousefling
 *
 *	@license
 *	FreeBSD Licensed
 */

(function(d){d.fn.mousefling=function(h,e,f){var i=function(c,g){(function(){this.construct=function(){this.opts=d.extend({},this.defaults,c);this.el=g;if("function"==typeof c&&(this.opts.onFling=c,e&&(this.opts.threshold=e),f))this.opts.minTravel=f;this.bindEvents()};this.bindEvents=function(){var a=this;g.mousedown(function(b){a.event.mousedown.call(a,b)});d(document).mouseup(function(b){a.event.mouseup.call(a,b)})};this.event={mouseup:function(a){this.dragging&&(this.dragging=!1,this.end(a.pageX,
a.pageY))},mousedown:function(a){this.dragging||this.start(a.pageX,a.pageY);this.dragging=!0}};this.start=function(a,b){this.startX=a;this.startY=b;this.startTime=(new Date).getTime()};this.end=function(a,b){this.endX=a;this.endY=b;this.endTime=(new Date).getTime();this.setPower()};this.setPower=function(){this.distX=this.endX-this.startX;this.distY=this.endY-this.startY;0>this.distX&&(this.distX=-this.distX);0>this.distY&&(this.distY=-this.distY);var a=!0,b=this.opts.minTravel;this.opts.minTravel&&
(b.x&&this.distX<b.x&&(a=!1),b.y&&this.distY<b.y&&(a=!1));a&&(this.distX>this.el.width()&&(this.distX=this.el.width()),this.distY>this.el.height()&&(this.distY=this.el.height()),this.time=this.endTime-this.startTime,this.powerX=100*(this.distX*this.opts.threshold/this.time),this.powerY=100*(this.distY*this.opts.threshold/this.time),this.opts.onFling&&this.opts.onFling.call(this,Math.round(this.powerX),Math.round(this.powerY)))};this.defaults={threshold:0.4}}).call(this);this.construct()};return this.each(function(){var c=
d(this);c.data("fling",new i(h,c))})}})(jQuery);